/*
  Dynamic Suite: AUI
  License: GPLv3
*/
Vue.component("aui-alert",{template:'<div v-if="visible" class="aui alert" :class="\'alert-\' + type"><div><h3 v-if="title">{{title}}</h3><p><slot></slot></p></div><i v-if="closeable" class="fa fa-times close" @click="$emit(\'close\')"></i></div>',props:{type:{type:String,default:"primary",validator:e=>-1!==["primary","secondary","success","warning","failure"].indexOf(e)},title:{type:String},visible:{type:Boolean,default:!0},closeable:{type:Boolean,default:!1}}});
Vue.component("aui-badge",{template:'<span class="aui badge" :class="\'badge-\' + type">{{content}}</span>',props:{type:{type:String,default:"primary",validator:e=>-1!==["primary","secondary","success","warning","failure"].indexOf(e)},content:{type:String|Number,required:!0}}});
Vue.component("aui-button",{template:'<button class="aui btn" :class="\'btn-\' + type" :disabled="is_disabled" @click="$emit(\'click\')"><span v-if="isDelayed()"><i class="fa fa-spin fa-circle-notch"></i><span v-if="has_loading_text" class="loading-text">{{loading_text}}</span><slot v-else></slot></span><slot v-else></slot></button>',props:{type:{type:String,default:"primary",validator:t=>-1!==["primary","secondary","success","warning","failure"].indexOf(t)},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loading_text:{type:String,default:null}},data:()=>({show_spinner:!1,default_class:!1}),computed:{has_loading_text(){return"string"==typeof this.loading_text},is_disabled(){return this.loading||this.disabled}},methods:{isDelayed(){return this.loading?setTimeout(()=>{this.loading&&(this.show_spinner=!0)},100):this.show_spinner=!1,this.show_spinner}}});
Vue.component("aui-button-drop",{template:'<div class="aui btn-drop" ref="dropdown"><button class="aui btn" :class="button_classes" @click="toggle"><span v-if="$slots.default"><slot></slot></span><i :class="icon_class"></i></button><ul v-show="show_dropdown" class="dropdown" ref="menu" :class="list_classes"><li v-for="entry in dropdown" @click="runAction(entry.action)">{{entry.label}}</li></ul></div>',props:{type:{type:String,default:"primary",validator:t=>-1!==["primary","secondary","success","warning","failure"].indexOf(t)},dropdown:{type:Array,required:!0,validator(t){for(let e=0;e<t.length;e++){if("string"!=typeof t[e].label)return!1;if("function"!=typeof t[e].action&&"string"!=typeof t[e].action)return!1}return!0}},icon_inactive:{type:String,default:"fas fa-caret-down"},icon_active:{type:String,default:"fas fa-caret-up"},menu_align:{style:String,default:"left",validator:t=>-1!==["left","right"].indexOf(t)}},computed:{button_classes(){let t={active:this.show_dropdown};return t["btn-"+this.type]=!0,t},icon_class(){return this.show_dropdown?this.icon_active:this.icon_inactive},list_classes(){return this.menu_align_master?this.menu_align_master+" "+this.anchor:this.menu_align+" "+this.anchor}},data:()=>({show_dropdown:!1,anchor:"",menu_align_master:null}),methods:{toggle(){this.show_dropdown=!this.show_dropdown,this.menu_align_master=null,this.anchor="",Vue.nextTick(()=>{this.$refs.menu.style.opacity="0";const t=this.$refs.menu.getBoundingClientRect(),e=window.innerHeight-t.bottom;window.innerWidth-t.right<0&&(this.menu_align_master="right"),e<0&&(this.anchor="top"),this.$refs.menu.style.opacity="1"})},outsideReset(t){this.$refs.dropdown.contains(t.target)||(this.show_dropdown=!1)},runAction(t){"function"==typeof t?t():window.open(t),this.show_dropdown=!1}},created(){window.addEventListener("click",this.outsideReset)},beforeDestroy(){window.removeEventListener("click",this.outsideReset)}});
Vue.component("aui-card",{template:'<div class="aui card" :class="\'card-\' + type"><h1>{{header}}</h1><div class="body"><h2 v-if="title">{{title}}</h2><p class="card-text"><slot></slot></p></div></div>',props:{type:{type:String,default:"primary",validator:e=>-1!==["neutral","primary","secondary","success","warning","failure"].indexOf(e)},header:{type:String,required:!0},title:{type:String}}});
Vue.component("aui-checkbox",{template:'<label class="aui checkbox"><slot></slot><input type="checkbox" :checked="checked" :disabled="disabled" @change="$emit(\'input\', $event.target.checked)"><span class="checkmark"></span></label>',props:{checked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}});
Vue.component("aui-datalist",{template:'<div :id="id + \'-container\'" class="aui datalist"><label>{{label}}<input :id="id" :class="input_classes" :name="name" :type="type" :placeholder="placeholder" :disabled="disabled" :value="value" :list="id + \'-datalist\'" @keydown="$emit(\'keydown\')" @focus="$emit(\'focus\')" @blur="$emit(\'blur\')" @input="$emit(\'input\', $event.target.value)"><datalist :id="id + \'-datalist\'"><option v-for="option in options" :value="option"></option></datalist></label><div v-if="subtext_value" class="subtext" :class="subtext_classes">{{subtext_value}}</div></div>',props:{id:{type:String,required:!0},label:{type:String},name:{type:String},type:{type:String,default:"text",validator:e=>-1!==["text","number"].indexOf(e)},placeholder:{type:String},disabled:{type:Boolean,default:!1},value:{type:String|Number},options:{type:Array|Object,default:[]},success:{type:String|Boolean,default:!1},failure:{type:String|Boolean,default:!1},subtext:{type:String}},computed:{input_classes(){return{"border-success":this.success,"border-failure":this.failure}},subtext_classes(){return{"text-success":this.success,"text-failure":this.failure}},subtext_value(){return this.success?this.success:this.failure?this.failure:this.subtext}}});
Vue.component("aui-list-group",{template:'<ul class="aui list-group"><li v-for="(row, key) in rows" :key="key" @click="row.action"><div class="text"><div class="title">{{row.title}}</div><div v-if="row.subtext" class="subtext">{{row.subtext}}</div></div><span class="icon"></span></li></ul>',props:{rows:{type:Array,required:!0,validator(t){for(let i=0;i<t.length;i++){if("string"!=typeof t[i].title)return!1;if(void 0!==t[i].subtext&&"string"!=typeof t[i].subtext)return!1;if("function"!=typeof t[i].action)return!1}return!0}}}});
Vue.component("aui-modal",{template:'<div v-if="show" class="aui modal-container" @click.self="runClose"><div class="modal"><div v-if="title" class="header" :class="\'modal-\' + type"><h2>{{title}}</h2><i v-if="closeable" class="fas fa-times" @click.self="runClose"></i></div><div class="body"><slot></slot></div></div></div>',props:{type:{type:String,default:"primary",validator:e=>-1!==["primary","secondary","success","warning","failure"].indexOf(e)},show:{type:Boolean,required:!0},title:{type:String},closeable:{type:Boolean,default:!0}},methods:{escapeClose(e){"Escape"===e.key&&this.runClose()},runClose(){if(!this.closeable)return!1;this.$emit("close")}},watch:{show(){this.show&&document.getElementById("ds-nav-container")&&document.getElementById("ds-view-header")?(document.getElementById("ds-nav-container").style.zIndex="0",document.getElementById("ds-view-header").style.zIndex="-1",document.getElementById("ds-nav-container").classList.remove("ds-nav-show-mobile"),document.getElementById("ds-view").style.overflowY="hidden"):!this.show&&document.getElementById("ds-nav-container")&&document.getElementById("ds-view-header")&&(document.getElementById("ds-nav-container").style.zIndex="1",document.getElementById("ds-view-header").style.zIndex="0",document.getElementById("ds-view").style.overflowY="auto")}},created(){this.closeable&&document.addEventListener("keyup",this.escapeClose)},beforeDestroy(){this.closeable&&document.removeEventListener("keyup",this.escapeClose)}});
Vue.component("aui-radio",{template:'<div class="aui"><label class="radio-container"><slot></slot><input type="radio" :name="name" :checked="checked" @change="$emit(\'input\', $event.target.checked)"><span class="radio"></span></label></div>',props:{name:{type:String,required:!0},checked:{type:Boolean}}});
Vue.component("aui-select",{template:'<div :id="id + \'-container\'" class="aui select-container"><label :for="id" v-if="title">{{title}}</label><div class="select-block"><select :name="name" :id="id" :class="classes + classFailure() + classSuccess()" :value="value" :disabled="disabled" @input="$emit(\'input\', $event.target.value)" @change="$emit(\'change\', $event.target.value)"><option v-if="us_states" v-for="(element, key) in states" :value="key" :selected="isSelected(key)">{{element}}</option><option v-if="!us_states" v-for="(element, key) in data" :value="key" :selected="isSelected(key)">{{element}}</option></select></div><div class="aui subtext" :class="subtextColorClass()" v-if="subtext">{{subtext}}</div></div>',props:{id:{type:String,required:!0},data:{type:Array|Object},value:{type:Array|Object|String|Boolean|Number},title:{type:String},name:{type:String},subtext:{type:String},success:{type:Boolean},failure:{default:!1},classes:{type:String,default:""},disabled:{type:Boolean,default:!1},us_states:{type:Boolean,default:!1}},data:()=>({states:{0:"",AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"}}),methods:{isSelected(e){return e==this.value},classSuccess(){return this.success?" border-success":""},classFailure(){return this.failure?" border-failure":""},subtextColorClass(){return this.success?"text-success":this.failure?"text-failure":""}}});
Vue.component("aui-tab",{template:'<span class="aui tab" :class="getActiveClass()" @click="$emit(\'click\'); doAction(action)">{{label}}</span>',props:{active:{type:Boolean,required:!0},label:{type:String,required:!0},action:{type:String|Function},disabled:{type:Boolean,default:!1}},methods:{getActiveClass(){let t=this.active?"active":"";return this.disabled&&(t+=" disabled"),t},doAction(){this.disabled||("string"==typeof this.action?window.open(this.action):"function"==typeof this.action?this.action():console.log("AUI-TAB: Action passed to click is not string or function; type: "+typeof this.action))}}});
Vue.component("aui-table",{template:'<div class="aui table-container"><div class="input-aligner" :class="search_align"><aui-input v-if="search" id="table-search" v-model="search_term" :value="search_term" placeholder="Search..."></aui-input></div><table class="table"><thead><tr v-if="headers"><th v-for="header in headers">{{header}}</th></tr><tr v-else><th v-for="(value, key) in current_data[0].values" v-if="subsetAllowed(key)">{{key}}</th></tr></thead><tbody><tr v-for="element in current_data" v-if="element.action" @click="element.action"><td v-for="(value, key) in element.values" v-if="subsetAllowed(key)">{{value}}</td></tr><tr v-for="element in current_data" v-if="!element.action"><td v-for="(value, key) in element.values" v-if="subsetAllowed(key)">{{value}}</td></tr></tbody></table><div class="no-data" if="current_data.length === 0">No Data</div></div>',props:{data:{type:Array,required:!0},subset:{type:Array,default:null},headers:{type:Array},search:{type:Boolean},search_value:{type:String},search_align:{type:String,default:"right",validator:e=>"left"===e||"right"===e||(console.log("AUI-TOGGLE: Label location can only be left, right, top, or bottom."),!1)}},data:function(){return{current_data:this.data,search_term:this.search_value}},watch:{search_term(){let e=this.search_term.toLowerCase();this.current_data=this.data.filter(t=>{let a=!1;return t.forEach(t=>{t.toString().toLowerCase().includes(e)&&(a=!0)}),a}),""===e&&(this.current_data=this.data)}},methods:{subsetAllowed(e){return null===this.subset||this.subset.includes(e)}}});
Vue.component("aui-tabs",{template:'<div class="aui tabs"><aui-tab v-for="(option, index) in options" :key="index" :active="option.active" :label="option.label" :action="option.action" :disabled="option.disabled" @click="setActive(option)" v-if="showTabs"></aui-tab><aui-button-drop :options="options" v-if="!showTabs" menu_align="right">{{getActive()}}</aui-button-drop></div>',props:{options:{type:Array}},data:function(){return{width:null,hideWidth:null,showTabs:!0}},methods:{setActive(t){t.disabled||(this.options.forEach(t=>{t.active=!1}),t.active=!0)},getActive(){return this.options.filter(t=>{if(t.active)return!0})[0].label},manageOverflow(){window.requestAnimationFrame(()=>{this.showTabs=this.$el.clientWidth>=this.width})}},created:function(){window.addEventListener("resize",this.manageOverflow)},mounted:function(){this.width=0,this.$children.forEach(t=>{this.width=this.width+t.$el.offsetWidth+16}),this.width=this.width+32,this.showTabs=this.$el.clientWidth>=this.width},destroyed:function(){window.removeEventListener("resize",this.manageOverflow)}});
Vue.component("aui-toggle",{template:'<div class="aui aui-toggle flex"><span class="switch-container" :class="label_location"><label>{{label}}</label><label class="switch"><input type="checkbox" :checked="checked" @change="$emit(\'input\', $event.target.checked)"><span class="slider round"></span></label></span></div>',props:{checked:{type:Boolean},label:{type:String},label_location:{type:String,default:"top",validator:e=>"left"===e||"right"===e||"top"===e||"bottom"===e||(console.log("AUI-TOGGLE: Label location can only be left, right, top, or bottom."),!1)}}});
Vue.component("aui-wysiwyg",{template:'<div :id="id + \'-container\'" class="aui wysiwyg-container"><label :for="id" class="wysiwyg-title">{{title}}</label><div :id="id"></div></div>',props:{id:{type:String,required:!0},title:{type:String},text:{default:""}},data:()=>({editor:null}),mounted:function(){const t=this;t.editor=pell.init({element:document.getElementById(t.id),defaultParagraphSeparator:"p",styleWithCSS:!0,onChange:e=>{t.$emit("input",e)},actions:["bold","italic","underline","heading1","ulist","olist"],classes:{actionbar:"pell-actionbar",button:"pell-btn",content:"pell-content",selected:"pell-button-selected"}}),t.editor.content.innerHTML=t.text},watch:{text(){""===this.editor.content.innerHTML&&(this.editor.content.innerHTML=this.text)}}});
