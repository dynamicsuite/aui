/*
 * Aui Package
 * Copyright (C) 2020 Dynamic Suite Team
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation version 3.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 */

/* Color definitions */
$primary: #15529d
$secondary: #6a6a6a
$warning: #ffc107
$failure: #e24848
$success: #38af47
$border: #ced4da
$checkbox-bk: #eee
$checkbox-hov: #ccc
$header-text: #fff
$nav-text: #c7cbd1

@mixin som-container
  background: darken(#e9ecef, 3%)
  padding: 1rem
  margin-bottom: 1rem
  border-radius: .25rem

@keyframes pulse-primary
  from
    background: $primary
  to
    background: none

@keyframes pulse-secondary
  from
    background: $secondary
  to
    background: none

@keyframes pulse-warning
  from
    background: $warning
  to
    background: none

@keyframes pulse-success
  from
    background: $success
  to
    background: none

@keyframes pulse-failure
  from
    background: $failure
  to
    background: none

[v-cloak]
  display: none !important

.aui

  *
    -moz-appearance: none
    -webkit-appearance: none

  /** Action area for button groups and messages */
  &.action-area
    display: flex
    margin: 1rem 0 1rem 0
    flex-direction: column

    /** Action buttons */
    .buttons
      display: flex
      margin-left: auto
      width: 100%

      .btn
        white-space: nowrap

      .btn:not(.btn-danger)
        margin-left: auto

      .btn:not(:first-child)
        margin-left: 0.5rem

      .btn-danger
        margin-right: auto

      @media (max-width: 434px)
        width: 100%

        .btn
          flex: 1

    /** Action messages */
    .message
      display: flex
      margin: 0.5rem 0 0 auto
      align-items: center
      font-style: italic
      @media (max-width: 434px)
        width: 100%
        justify-content: center

/* Button groups */
.btn-group
  display: inline-flex
  align-items: start

  /* Buttons and dropdowns within the group */
  > *:not(:first-child)
    border-left: 1px solid rgba(0, 0, 0, 0.15) !important
    margin: 0 -1px

  > .btn:not(:first-of-type), > .btn:not(:last-of-type)
    border-radius: 0

  /* First button in the group */
  > .btn:first-of-type
    border-radius: 0.25rem 0 0 0.25rem
    border: 0
    margin: 0

  /* Last button in the group */
  > .btn:last-of-type:not(:first-of-type)
    border-radius: 0 0.25rem 0.25rem 0
    margin: 0

  /* Button dropdown if attached */
  > .btn-drop > .btn
    border-radius: 0 0.25rem 0.25rem 0
    margin: 0

  // Input styling
  .input-container
    display: flex
    flex-direction: column
    border-radius: .25rem

    *
      width: 100%

    label
      margin-bottom: .5rem

    .input-block
      display: flex

      &.caps:focus-within
        box-shadow: 0 0 0 1px rgba(0, 123, 255, .8)
        border-radius: .25rem

      input
        flex: 1
        font-size: 1rem
        padding: .5rem
        border-radius: 0.25rem
        border: 1px solid #ced4da
        align-self: flex-start
        height: calc(100% - 1rem)

        &[type="date"]
          height: calc(1rem + 2px)
          min-height: calc(1rem + 2px)
          position: relative

          /*
           * make the native arrow invisible and stretch it over the whole field so
           * you can click anywhere in the input field to trigger the native datepicker
           */
          &::-webkit-calendar-picker-indicator
            position: absolute
            top: 0
            left: 0
            right: 0
            bottom: 0
            width: auto
            height: auto
            color: transparent
            background: transparent

          /* adjust increase/decrease button */
          &::-webkit-inner-spin-button
            z-index: 1

          /* adjust clear button */
          &::-webkit-clear-button
            z-index: 1

          &:not(:disabled)
            background: #fff

        &:focus
          outline: none
          box-shadow: 0 0 0 1px rgba(0, 123, 255, .8)

        &:disabled
          background: darken(#e9ecef, 15%)

        &::-webkit-inner-spin-button, &::-webkit-outer-spin-button
          -webkit-appearance: none
          margin: 0

      input.border-success
        border: 1px solid $success

        .leading-element
          border-left: 1px solid $success
          border-top: 1px solid $success
          border-bottom: 1px solid $success

        .trailing-element
          border-right: 1px solid $success
          border-top: 1px solid $success
          border-bottom: 1px solid $success

        &:not(.no-background-icon)
          padding-right: 2.5rem !important
          background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e")
          background-repeat: no-repeat
          background-position: right .5rem center
          background-size: 1.5rem

      input.border-failure
        border: 1px solid $failure

        .leading-element
          border-left: 1px solid $failure
          border-top: 1px solid $failure
          border-bottom: 1px solid $failure

        .trailing-element
          border-right: 1px solid $failure
          border-top: 1px solid $failure
          border-bottom: 1px solid $failure

        &:not(.no-background-icon)
          padding-right: 2.5rem !important
          background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e")
          background-repeat: no-repeat
          background-position: right .5rem center
          background-size: 1.5rem

      input.caps
        border-radius: 0 !important

      .edge-element
        display: flex
        justify-content: center
        align-items: center
        font-size: .9rem
        padding: .45rem .5rem
        color: #495057
        background: #e9ecef
        border: 1px solid #ced4da
        z-index: 2
        white-space: nowrap

      .leading-element
        flex: 0
        justify-self: flex-start
        margin-right: -.4rem
        border-radius: 0.25rem 0 0 0.25rem

        &.border-success
          border-left: 1px solid $success
          border-top: 1px solid $success
          border-bottom: 1px solid $success

        &.border-failure
          border-right: 1px solid $failure
          border-top: 1px solid $failure
          border-bottom: 1px solid $failure

      .trailing-element
        flex: 0
        justify-self: flex-end
        margin-left: -.4rem
        border-radius: 0 0.25rem  0.25rem 0

        &.border-success
          border-right: 1px solid $success
          border-top: 1px solid $success
          border-bottom: 1px solid $success

        &.border-failure
          border-right: 1px solid $failure
          border-top: 1px solid $failure
          border-bottom: 1px solid $failure

    .subtext
      font-size: .8rem
      margin-top: .25rem
      color: #6c757d

  // Primary border theming
  &.border-primary
    border: 1px solid $primary !important

  // Secondary border theming
  &.border-secondary
    border: 1px solid $secondary !important

  // Warning border theming
  &.border-warning
    border: 1px solid $warning !important

  // Failure border theming
  &.border-failure
    border: 1px solid $failure !important

  // Success border theming
  &.border-success
    border: 1px solid $success !important

  // Text success styling
  &.text-success
    color: $success !important

  // Text failure styling
  &.text-failure
    color: $failure !important

  &.flex
    display: flex

  &.right
    margin-left: auto

  .pulse-primary
    animation: pulse-primary .75s linear
  .pulse-secondary
    animation: pulse-secondary .75s linear
  .pulse-warning
    animation: pulse-warning .75s linear
  .pulse-success
    animation: pulse-success .75s linear
  .pulse-failure
    animation: pulse-failure .75s linear