Vue.component("aui-alert",{template:'<div v-if="show" class="aui alert" :class="style_class"><div><h3 v-if="title">{{title}}</h3><slot>{{text}}</slot></div><i v-if="closeable" class="fa fa-times close" @click="handleClose"/></div>',props:{type:{type:String,default:"primary",validator(e){return-1!==["none","primary","secondary","success","warning","failure"].indexOf(e)}},title:{type:String},text:{type:null|String,required:!1},show:{type:Boolean|String|null,default:!0},closeable:{type:Boolean,default:!1}},computed:{style_class(){return{[this.type]:"none"!==this.type}}},methods:{handleClose(){this.$emit("update:show",!1),this.$emit("close")}}});
Vue.component("aui-badge",{template:'<span class="aui badge" :class="style_class"><slot>{{text}}</slot></span>',props:{type:{type:String,default:"primary",validator(e){return-1!==["none","primary","secondary","success","warning","failure"].indexOf(e)}},text:{type:String|Number}},computed:{style_class(){return{[this.type]:"none"!==this.type}}}});
Vue.component("aui-button",{template:`<button class="aui btn" :class="style_class" :disabled="is_disabled" @click="$emit('click')"><i v-if="loading" class="fa fa-spin fa-circle-notch"/><template v-if="loading && loading_text">{{loading_text}}</template><template v-else><slot>{{text}}</slot></template><aui-badge v-if="badge" :type="badge" :text="badge_text"/></button>`,props:{type:{type:String,default:"primary",validator(t){return-1!==["none","primary","secondary","success","warning","failure"].indexOf(t)}},text:{type:null|String,default:null},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loading_text:{type:String,default:null},badge:{type:null|String,default:null,validator(t){return-1!==[null,"none","primary","secondary","success","warning","failure"].indexOf(t)}},badge_text:{type:String,default:"!"}},computed:{style_class(){return{[this.type]:"none"!==this.type}},is_disabled(){return this.loading||this.disabled}}});
Vue.component("aui-button-drop",{template:`<div class="aui btn-drop" ref="dropdown"><button class="aui btn" :class="style_class" :disabled="is_disabled" @click="toggle"><span v-if="text || $slots.default"><slot>{{text}}</slot></span><i :class="icon_class"/></button><ul v-show="show_dropdown" class="dropdown" ref="menu" :class="list_classes"><li v-for="(text, event) in dropdown" :key="'entry-' + event" @click="handleClick(event)">{{text}}</li></ul></div>`,props:{type:{type:String,default:"primary",validator(t){return-1!==["none","primary","secondary","success","warning","failure"].indexOf(t)}},text:{type:null|String,default:null},dropdown:{type:Object,required:!0,validator(t){for(const e in t)if("string"!=typeof t[e])return!1;return!0}},disabled:{type:Boolean,default:!1},icon_inactive:{type:String,default:"fas fa-caret-down"},icon_active:{type:String,default:"fas fa-caret-up"},menu_align:{type:String,default:"right",validator(t){return-1!==["left","right"].indexOf(t)}},relative_to:{type:null|String,default:null}},computed:{style_class(){return{[this.type]:"none"!==this.type}},is_disabled(){return this.loading||this.disabled},icon_class(){return this.show_dropdown?this.icon_active:this.icon_inactive},list_classes(){return{top:!!this.anchor_top,[this.menu_align_master]:!!this.menu_align_master,[this.menu_align]:!this.menu_align_master}}},data(){return{show_dropdown:!1,anchor_top:!1,menu_align_master:null}},methods:{handleClick(t){this.$emit(t),this.$emit("menu-click",t),this.show_dropdown=!1},toggle(){this.show_dropdown=!this.show_dropdown,this.menu_align_master=null,this.anchor_top=!1,this.$nextTick(()=>{this.$refs.menu.style.opacity="0";var t,e=this.$refs.menu.getBoundingClientRect();let i=window.innerHeight-e.bottom,n=window.innerWidth-e.right;!this.relative_to||(t=this.$refs.menu.closest(this.relative_to))&&(i=t.offsetHeight-e.bottom,n=t.offsetWidth-e.right),n<0&&(this.menu_align_master="right"),i<0&&(this.anchor_top=!0),this.$refs.menu.style.opacity="1"})},blurDropdownMenu(t){this.$refs.dropdown.contains(t.target)||(this.show_dropdown=!1)}},created(){window.addEventListener("click",this.blurDropdownMenu)},beforeDestroy(){window.removeEventListener("click",this.blurDropdownMenu)}});
Vue.component("aui-checkbox",{template:`<aui-form-control v-bind="properties"><input type="checkbox" :value="value" :checked="checked" :disabled="disabled" @input="$emit('input', $event.target.checked)"/></aui-form-control>`,props:{label:{type:null|String,default:null},value:{type:String|Number|Boolean|null,default:null},checked:{type:Boolean|Number,default:!1},disabled:{type:Boolean,default:!1},success:{type:null|String,default:null},failure:{type:null|String,default:null},subtext:{type:null|String,default:null}},computed:{properties(){return{parent:"checkbox",label:this.$slots.default||this.label,success:this.success,failure:this.failure,subtext:this.subtext}}}});
Vue.component("aui-crud",{template:`<div class="aui crud"><aui-notice v-if="error" type="failure" :icon="error_icon" :text="error_text" :subtext="error_subtext"/><aui-notice v-else-if="created" type="success" :icon="form_created_confirmation_icon" :text="form_created_confirmation_text"/><aui-notice v-else-if="form_loading && overlay" :icon="form_loading_icon" :text="form_loading_text"/><aui-crud-list v-else-if="!show_form && !setup" :title="list_title" :show_create="list_show_create" :create_icon="list_create_icon" :show_search="list_show_search" :search_placeholder="list_search_placeholder" :no_data_icon="list_no_data_icon" :no_data_text="list_no_data_text" :loading_icon="list_loading_icon" :loading_text="list_loading_text" :calling="calling" :overlay="overlay" :type="list_type" :storable_key="storable_key" :group_icon_key="list_group_icon_key" :group_title_key="list_group_title_key" :group_subtext_key="list_group_subtext_key" :table_default_columns="list_table_default_columns" :table_column_names="list_table_column_names" :table_column_format="list_table_column_format" :table_storage_key="list_table_storage_key" :read_api="list_read_api" :read_optional_data="list_read_optional_data" :range_limit="list_range_limit" :search_delay="list_search_delay" :refresh_interval="list_refresh_interval" :get_key_limit="list_get_key_limit" :get_key_page="list_get_key_page" :get_key_search="list_get_key_search" :get_key_sort="list_get_key_sort" @update:calling="$emit('update:calling', $event)" @error="handleError" @show-create="handleFormCreate" @list-interaction="handleFormUpdate"><template #actions><slot name="list-actions" :overlay="overlay"/></template></aui-crud-list><div v-else-if="!setup" class="form"><slot name="form" :overlay="overlay"/><div class="actions"><aui-button v-if="form_show_back_button" type="secondary" :disabled="overlay" :text="form_action_back_text" @click="runBack"/><div v-if="!form_for_create && form_update_api && !form_loading" class="btn-group"><i v-if="show_tick" :class="tick_classes"/><aui-button :text="form_action_update_text" :loading="overlay" :loading_text="form_action_update_loading_text" @click="runUpdate"/><aui-button-drop v-if="form_delete_api" relative_to=".form" :disabled="overlay" :dropdown="{delete: this.form_action_delete_text}" @delete="promptDelete"/></div><aui-button v-if="form_for_create && form_create_api && !form_loading" :text="form_action_create_text" :loading="overlay" :loading_text="form_action_create_loading_text" @click="runCreate"/></div></div><aui-modal type="failure" :title="form_action_delete_title" :show.sync="show_delete_modal"><template #content><slot name="delete-prompt"><p>{{form_action_delete_prompt}}</p></slot><aui-input label="Type DELETE to confirm" class="delete-confirm-input" v-model="delete_confirm"/><aui-alert v-if="delete_protect" type="failure" :text="delete_protect"/></template><template #left><aui-button type="secondary" :disabled="overlay" :text="form_action_delete_cancel_text" @click="runCancelDelete"/></template><template #right><aui-button type="failure" :disabled="!delete_confirmed" :loading="overlay" :loading_text="form_action_delete_loading_text" :text="form_action_delete_text" @click="runDelete"/></template></aui-modal></div>`,props:{error_icon:{type:String,default:"fas fa-exclamation-triangle"},error_text:{type:String,default:"A server error has occurred"},error_subtext:{type:String,default:"Please reload the page"},storable_key:{type:String,default:"id"},get_key_id:{type:String,default:"crud"},calling:{type:Boolean,default:!1},list_title:{type:String,default:"CRUD List"},list_show_create:{type:Boolean,default:!0},list_create_icon:{type:String,default:"fas fa-plus"},list_show_search:{type:Boolean,default:!0},list_search_placeholder:{type:String,default:"Search"},list_no_data_icon:{type:String,default:"fas fa-ban"},list_no_data_text:{type:String,default:"No data"},list_loading_icon:{type:String,default:"fas fa-circle-notch fa-spin"},list_loading_text:{type:null|String,default:"Loading..."},list_type:{type:String,default:"table",validator:t=>-1!==["group","table"].indexOf(t)},list_group_icon_key:{type:String,default:"icon"},list_group_title_key:{type:String,default:"title"},list_group_subtext_key:{type:String,default:"subtext"},list_table_default_columns:{type:Array,default:()=>[]},list_table_column_names:{type:Object,default:()=>({})},list_table_column_format:{type:Object,default:()=>({})},list_table_storage_key:{type:null|String,default:null},list_read_api:{type:String,required:!0},list_read_optional_data:{type:Object,default:()=>({})},list_range_limit:{type:Array,default:()=>[15,25,50,100]},list_search_delay:{type:Number,default:300},list_refresh_interval:{type:null|Number,default:null},list_get_key_limit:{type:String,default:"limit"},list_get_key_page:{type:String,default:"page"},list_get_key_search:{type:String,default:"search"},list_get_key_sort:{type:String,default:"sort"},form:{type:Object,default:()=>({})},form_secure_fields:{type:Array,default:()=>[]},feedback:{type:Object,default:()=>({})},form_loading_icon:{type:String,default:"fas fa-circle-notch fa-spin"},form_loading_text:{type:null|String,default:"Loading..."},form_create_setup_api:{type:null|String,default:null},form_create_setup_api_data:{type:Object,default:()=>({})},form_create_api:{type:null|String,default:null},form_create_api_data:{type:Object,default:()=>({})},form_read_api:{type:String,required:!0},form_read_api_data:{type:Object,default:()=>({})},form_update_api:{type:null|String,default:null},form_update_api_data:{type:Object,default:()=>({})},form_delete_api:{type:null|String,default:null},form_delete_api_data:{type:Object,default:()=>({})},form_show_actions:{type:Boolean,default:!0},form_show_back_button:{type:Boolean,default:!0},form_action_back_text:{type:String,default:"Back"},form_action_update_text:{type:String,default:"Update"},form_action_update_loading_text:{type:String,default:"Updating..."},form_action_create_text:{type:String,default:"Create"},form_action_create_loading_text:{type:String,default:"Creating..."},form_created_confirmation_icon:{type:String,default:"fas fa-check-circle"},form_created_confirmation_text:{type:String,default:"Created!"},form_action_delete_cancel_text:{type:String,default:"Cancel"},form_action_delete_text:{type:String,default:"Delete"},form_action_delete_loading_text:{type:String,default:"Deleting..."},form_action_delete_title:{type:String,default:"Confirm Delete"},form_action_delete_prompt:{type:String,default:"Are you sure you want to delete?"},form_feedback_success_tick_icon:{type:String,default:"fas fa-check"},form_feedback_failure_tick_icon:{type:String,default:"fas fa-times"}},data(){return{setup:!0,show_form:!1,form_loading:!1,error:!1,created:!1,overlay:!1,show_delete_modal:!1,delete_confirm:null,delete_protect:null,show_success_tick:!1,show_failure_tick:!1}},computed:{form_for_create(){return!this.form[this.storable_key]},delete_confirmed(){return"DELETE"===this.delete_confirm},show_tick(){return this.show_success_tick||this.show_failure_tick},tick_classes(){return{"feedback-tick":!0,[this.form_feedback_success_tick_icon]:this.show_success_tick,[this.form_feedback_failure_tick_icon]:this.show_failure_tick}}},watch:{calling:function(t){t?setTimeout(()=>{this.calling&&(this.overlay=!0)},100):this.overlay=!1}},methods:{resetForm(){const t=JSON.parse(JSON.stringify(this.form));for(const e in t)t[e]=null;this.$emit("update:form",t)},secureForm(){const t=JSON.parse(JSON.stringify(this.form));for(const e of this.form_secure_fields)t.hasOwnProperty(e)&&(t[e]=null);this.$emit("update:form",t)},resetFeedback(){const t=JSON.parse(JSON.stringify(this.feedback));for(const e in t)t[e]=null;this.show_success_tick=!1,this.show_failure_tick=!1,this.$emit("update:feedback",t)},readStorable(i){var t=Object.assign({[this.storable_key]:i},this.form_read_api_data);DynamicSuite.call(this.form_read_api,t,t=>{switch(t.status){case"OK":if("object"!=typeof t.data){this.error=!0;break}const e=JSON.parse(JSON.stringify(this.form));for(const a in t.data)e.hasOwnProperty(a)&&(e[a]=t.data[a]);this.show_form=!0,this.form_loading=!1,DynamicSuite.setURLSavedData(this.get_key_id,i),this.setup=!1,this.$emit("update:form",e),this.$emit("update:calling",!1);break;default:this.error=!0}})},handleError(){this.clearURLSavedData([this.get_key_id]),this.error=!0},handleFormCreate(){DynamicSuite.setURLSavedData(this.get_key_id,0),this.runCreateSetup()},handleFormUpdate(t){this.form_loading=!0,this.resetForm(),this.resetFeedback(),this.$emit("update:calling",!0),this.readStorable(t)},runBack(){this.resetForm(),this.resetFeedback(),DynamicSuite.deleteURLSavedData(this.get_key_id),this.show_form=!1},runCreateSetup(){this.calling||(this.form_loading=!0,this.resetForm(),this.resetFeedback(),this.form_api_create_setup?(this.$emit("update:calling",!0),DynamicSuite.call(this.form_create_setup_api,this.form_create_setup_api_data,t=>{"OK"===t.status?(this.show_form=!0,this.form_loading=!1,this.setup=!1,this.$emit("update:calling",!1)):this.error=!0})):(this.show_form=!0,this.form_loading=!1,this.setup=!1))},runCreate(){var t;this.calling||(this.resetFeedback(),this.$emit("update:calling",!0),t=Object.assign({},this.form,this.form_create_api_data),DynamicSuite.call(this.form_create_api,t,t=>{switch(t.status){case"OK":this.created=!0,this[this.storable_key]=t.data,setTimeout(()=>{this.created=!1},1e3),this.form_loading=!0,this.readStorable(t.data),this.secureForm(),DynamicSuite.deleteURLSavedData(this.get_key_id),this.$emit("update:calling",!1);break;case"INPUT_ERROR":const e=JSON.parse(JSON.stringify(this.feedback));for(const a in e)"object"==typeof t.data&&t.data.hasOwnProperty(a)&&(e[a]=t.data[a]);this.$emit("update:feedback",e),this.$emit("update:calling",!1);break;default:this.error=!0}}))},runUpdate(){var t;this.calling||(this.resetFeedback(),this.$emit("update:calling",!0),t=Object.assign({},this.form,this.form_update_api_data),DynamicSuite.call(this.form_update_api,t,t=>{switch(t.status){case"OK":this.secureForm(),this.show_success_tick=!0,this.$emit("update:calling",!1);break;case"INPUT_ERROR":const e=JSON.parse(JSON.stringify(this.feedback));for(const a in e)"object"==typeof t.data&&t.data.hasOwnProperty(a)&&(e[a]=t.data[a]);this.show_failure_tick=!0,this.$emit("update:feedback",e),this.$emit("update:calling",!1);break;default:this.error=!0}}))},promptDelete(){this.delete_confirm=null,this.delete_protect=null,this.show_delete_modal=!0},runCancelDelete(){this.show_delete_modal=!1},runDelete(){var t;this.calling||(this.delete_confirm=null,this.delete_protect=null,this.$emit("update:calling",!0),t=Object.assign({[this.storable_key]:this.form[this.storable_key]},this.form_delete_api_data),DynamicSuite.call(this.form_delete_api,t,t=>{switch(t.status){case"OK":this.show_delete_modal=!1,this.show_form=!1,this.resetForm(),this.resetFeedback(),DynamicSuite.clearURLSavedData([this.get_key_id]),window.history.back(),this.$emit("update:calling",!1);break;case"DELETE_PROTECT":this.delete_protect=t.data,this.$emit("update:calling",!1);break;default:this.show_delete_modal=!1,this.error=!0}}))},setURLSavedData(){const t=new URLSearchParams(window.location.search);var e=parseInt(t.get(this.get_key_id));Number.isNaN(e)?(this.show_form=!1,this.setup=!1):(this.$emit("update:calling",!1),this.form_loading=!0,this.show_form=!0,0===e?this.runCreateSetup():this.handleFormUpdate(e))}},mounted(){this.setURLSavedData(),window.addEventListener("popstate",()=>{this.setURLSavedData()})}});
Vue.component("aui-crud-list",{template:`<div class="aui crud-list"><div class="header"><h2><template>{{title}}</template><i v-if="!initial_read && overlay" :class="loading_icon"/></h2><div class="actions"><slot name="actions"/><aui-button v-if="show_create" :disabled="overlay" @click="$emit('show-create')"><i :class="create_icon"/></aui-button><aui-input v-if="show_search" :placeholder="search_placeholder" :disabled="overlay" v-model="search" @input="runSearch"/></div></div><aui-notice v-if="show_no_data_notice" :icon="no_data_icon" :text="no_data_text"/><aui-notice v-else-if="initial_read && overlay" :icon="loading_icon" :text="loading_text"/><aui-list-group v-else-if="type === 'group' && !initial_read && list_group_data.length" :list="list_group_data" @click="$emit('list-interaction', $event)"/><aui-table v-else-if="type === 'table' && !initial_read && data.length" interactive sortable :table="data" :interactive_column="storable_key" :default_columns="table_default_columns" :column_names="table_column_names" :column_format="table_column_format" :sort.sync="sort" :storage_key="table_storage_key" :calling="calling" @row-interaction="$emit('list-interaction', $event)"/><aui-pagination v-if="!show_no_data_notice && !initial_read" :disabled="overlay" :page.sync="page" :total="total" :limit.sync="limit" :list_range_limit="range_limit" @paginate="handlePaginate"/></div>`,props:{title:{type:String,default:"CRUD List"},show_create:{type:Boolean,default:!0},create_icon:{type:String,default:"fas fa-plus"},show_search:{type:Boolean,default:!0},search_placeholder:{type:String,default:"Search"},no_data_icon:{type:String,default:"fas fa-ban"},no_data_text:{type:String,default:"No data"},loading_icon:{type:String,default:"fas fa-circle-notch fa-spin"},loading_text:{type:null|String,default:"Loading..."},calling:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1},type:{type:String,default:"table",validator:t=>-1!==["group","table"].indexOf(t)},storable_key:{type:String,default:"id"},group_icon_key:{type:String,default:"icon"},group_title_key:{type:String,default:"title"},group_subtext_key:{type:String,default:"subtext"},table_default_columns:{type:Array,default:()=>[]},table_column_names:{type:Object,default:()=>({})},table_column_format:{type:Object,default:()=>({})},table_storage_key:{type:null|String,default:null},read_api:{type:String,required:!0},read_optional_data:{type:Object,default:()=>({})},range_limit:{type:Array,default:()=>[15,25,50,100]},search_delay:{type:Number,default:300},refresh_interval:{type:null|Number,default:null},get_key_limit:{type:String,default:"limit"},get_key_page:{type:String,default:"page"},get_key_search:{type:String,default:"search"},get_key_sort:{type:String,default:"sort"}},data(){return{initial_read:!0,limit:0,total:0,page:1,search:null,search_timer:null,sort:{},data:[]}},computed:{show_no_data_notice(){return!this.calling&&("group"===this.type&&!this.list_group_data.length||"table"===this.type&&!this.data.length)},list_group_data(){const t=[];for(const e of this.data)e.hasOwnProperty(this.group_title_key)?t.push({icon:e.hasOwnProperty(this.group_icon_key)?e[this.group_icon_key]:"",title:e[this.group_title_key],subtext:e.hasOwnProperty(this.group_subtext_key)?e[this.group_subtext_key]:"",value:e.hasOwnProperty(this.storable_key)?e[this.storable_key]:null}):console.error("AUI CRUD list group data missing group title key");return t}},watch:{sort(){let t="";if(Object.keys(this.sort).length){for(const a in this.sort)t+=`${a}.${this.sort[a]}~`;t=t.slice(0,-1)}const e=new URLSearchParams(window.location.search);e.has(this.get_key_sort)&&e.get(this.get_key_sort)===t||(e.has(this.get_key_sort)&&!t?DynamicSuite.deleteURLSavedData(this.get_key_sort,!1):t&&DynamicSuite.setURLSavedData(this.get_key_sort,t,!1),this.readList())},limit(){const t=new URLSearchParams(window.location.search);t.has(this.get_key_limit)&&parseInt(t.get(this.get_key_limit))===this.limit||(t.has(this.get_key_limit)&&this.limit===this.range_limit[0]?DynamicSuite.deleteURLSavedData(this.get_key_limit,!1):this.limit!==this.range_limit[0]&&DynamicSuite.setURLSavedData(this.get_key_limit,this.limit,!1))}},methods:{handlePaginate(){const t=new URLSearchParams(window.location.search);t.has(this.get_key_page)&&parseInt(t.get(this.get_key_page))===this.page||(t.has(this.get_key_page)&&this.page<=1?DynamicSuite.deleteURLSavedData(this.get_key_page):1<this.page&&DynamicSuite.setURLSavedData(this.get_key_page,this.page),this.readList())},readList(){var t;this.calling||(this.data.length||(this.initial_read=!0),t=Object.assign({page:this.page,limit:this.limit,search:this.search,sort:this.sort},this.read_optional_data),this.$emit("update:calling",!0),DynamicSuite.call(this.read_api,t,t=>{"OK"===t.status?(this.data=t.data.list,this.total=t.data.total,this.initial_read=!1,this.$emit("update:calling",!1)):(DynamicSuite.clearURLSavedData([this.get_key_limit,this.get_key_page,this.get_key_search,this.get_key_sort]),this.$emit("error"))}))},runSearch(){clearTimeout(this.search_timer),this.search_timer=setTimeout(()=>{this.page=1,this.search?DynamicSuite.setURLSavedData(this.get_key_search,this.search,!1):DynamicSuite.deleteURLSavedData(this.get_key_search),this.readList()},this.search_delay)},setURLSavedData(){const t=new URLSearchParams(window.location.search);var e=parseInt(t.get(this.get_key_limit)),a=parseInt(t.get(this.get_key_page));const i=t.get(this.get_key_sort),s={};if(i)for(const r of i.split("~")){var l=r.split(".");2===l.length&&-1!==["ASC","DESC"].indexOf(l[1])&&(s[l[0]]=l[1])}this.limit=0<e?e:this.range_limit[0],this.page=0<a?a:1,this.search=t.get(this.get_key_search),this.$set(this,"sort",s)}},mounted(){this.setURLSavedData(),this.readList(),this.refresh_interval&&setInterval(()=>{this.readList()},1e3*this.refresh_interval),window.addEventListener("popstate",()=>{this.setURLSavedData(),this.readList()})}});
Vue.component("aui-form-control",{template:'<div class="aui form-control" :class="container_classes"><slot name="label"></slot><label v-if="can_have_caps" class="standard-container"><span v-if="label" class="label" v-html="label"/><span class="cap-container"><span v-if="leading_cap" class="leading-cap" v-html="leading_cap"/><span v-if="trailing_cap" class="trailing-cap" v-html="trailing_cap"/><slot/></span></label> <label v-if="has_pseudo" class="pseudo-container"><slot/><span v-if="has_pseudo" class="pseudo"/><span v-if="label" class="label" v-html="label"/></label> <label v-if="is_wysiwyg && label" class="label" v-html="label"/><slot v-if="is_wysiwyg"/><slot v-if="is_slider"></slot><span v-if="subtext_value" class="subtext">{{subtext_value}}</span></div>',props:{parent:{type:String,required:!0,validator(e){return-1!==["checkbox","input","radio","select","textarea","toggle","wysiwyg","slider","range"].indexOf(e)}},label:{type:null|String,required:!1,default:null},leading_cap:{type:null|String,default:null},trailing_cap:{type:null|String,default:null},success:{type:null|String,default:null},failure:{type:null|String,default:null},subtext:{type:null|String,default:null},no_feedback_icon:{type:Boolean,default:!1}},computed:{has_pseudo(){return"checkbox"===this.parent||"radio"===this.parent||"toggle"===this.parent},can_have_caps(){return"input"===this.parent||"select"===this.parent||"textarea"===this.parent},is_wysiwyg(){return"wysiwyg"===this.parent},is_slider(){return"slider"===this.parent||"range"===this.parent},container_classes(){return{[this.parent]:!0,success:!!this.success,failure:!!this.failure,"no-feedback-icon":this.no_feedback_icon}},subtext_value(){return"string"==typeof this.success?this.success:"string"==typeof this.failure?this.failure:this.subtext}},watch:{failure(){clearTimeout(window.aui_form_control_failure_timeout),window.aui_form_control_failure_timeout=setTimeout(()=>{let e=document.getElementById("ds-view");e=e||document.body;const t=document.querySelectorAll(".aui.form-control.failure")[0];var l;t&&(l=t.getBoundingClientRect(),e.scrollBy({top:l.top-l.height-100,behavior:"smooth"}))},99)}}});
Vue.component("aui-input",{template:`<aui-form-control v-bind="properties"><input ref="input" :value="value" :type="type" :list="unique_id" :autocomplete="autocomplete" :placeholder="placeholder" :tabindex="tabindex" :disabled="disabled" :step="step" @focus="$emit('focus', $event.target)" @blur="$emit('blur', $event.target)" @change="$emit('change', $event.target)" @input="handleInput($event.target.value)" @keydown="$emit('keydown', $event)"/><datalist v-if="!!options.length && array_options" :id="unique_id"><option v-for="(value, key) in options" :key="'option-' + key" :value="value"/></datalist><datalist v-if="!array_options && !!Object.keys(options).length" :id="unique_id"><option v-for="(value, key) in options" :key="'option-' + key" :value="key">{{value}}</option></datalist></aui-form-control>`,props:{label:{type:null|String,default:null},leading_cap:{type:null|String,default:null},trailing_cap:{type:null|String,default:null},value:{type:String|Number|Boolean|null,default:null},type:{type:String,default:"text",validator(e){return-1!==["color","date","datetime-local","email","file","number","password","range","search","tel","text","time","url","week"].indexOf(e)}},autocomplete:{type:null|String,default:null},placeholder:{type:null|String,default:null},disabled:{type:Boolean,default:!1},options:{type:Array|Object,default:()=>[]},tabindex:{type:String|Number|null,default:null},step:{type:String|Number|null,default:null},max_whole_digits:{type:String|Number|null,default:null},max_decimal_digits:{type:String|Number|null,default:null},success:{type:null|String,default:null},failure:{type:null|String,default:null},subtext:{type:null|String,default:null},no_feedback_icon:{type:Boolean,default:!1}},computed:{properties(){return{parent:"input",label:this.$slots.default||this.label,leading_cap:this.leading_cap,trailing_cap:this.trailing_cap,success:this.success,failure:this.failure,subtext:this.subtext,no_feedback_icon:this.no_feedback_icon}},unique_id(){return`aui-input-${this._uid}`},array_options(){return Array.isArray(this.options)}},methods:{handleInput(t){if("tel"===this.type){var l=t.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);t=l[2]?"("+l[1]+") "+l[2]+(l[3]?"-"+l[3]:""):l[1],this.$refs.input.value=t}else if("number"===this.type&&""!==t){t=t.replace("e","");l=(t=0===this.max_decimal_digits?t.replace(".",""):t).includes(".");const i=t.split(".");let e="";e=0<this.max_whole_digits&&i[0].length>this.max_whole_digits?i[0].slice(0,-1):i[0],0<this.max_decimal_digits&&l&&i[1].length>this.max_decimal_digits?e+="."+i[1].slice(0,-1):0!==this.max_decimal_digits&&void 0!==i[1]&&(e+="."+i[1]),e&&(t=e),this.$refs.input.value=t}this.$emit("input",t)}}});
Vue.component("aui-list-group",{template:`<ul class="aui list-group"><li v-for="(row, key) in list" :key="'list-group-row-' + key" @click="$emit('click', row.value)"><span v-if="row.icon" class="leading-icon"><i :class="row.icon"></i></span><div class="text"><div class="title">{{row.title}}</div><div v-if="row.subtext" class="subtext" v-html="row.subtext"/></div><span class="trailing-icon"></span></li></ul>`,props:{list:{type:Array,required:!0,validator:i=>{for(const t of i){if("string"!=typeof t.title)return!1;if(void 0!==t.subtext&&"string"!=typeof t.subtext)return!1;if(void 0!==t.icon&&"string"!=typeof t.icon)return!1}return!0}}}});
Vue.component("aui-modal",{template:'<div v-if="show" class="aui modal-container" @mousedown.self="handleClose"><div class="modal"><div v-if="title" class="header" :class="type"><span>{{title}}</span> <i v-if="closeable" class="fas fa-times" @click.self="handleClose"/></div><div class="body"><slot><section class="content"><slot name="content"/></section><footer><div v-if="$slots.left" class="left"><slot name="left"/></div><div v-if="$slots.right" class="right"><slot name="right"/></div></footer></slot></div></div></div>',props:{type:{type:null|String,default:"primary",validator(e){return-1!==[null,"primary","secondary","success","warning","failure"].indexOf(e)}},show:{type:Boolean,required:!0},title:{type:String|Number|null,default:null},closeable:{type:Boolean,default:!0}},watch:{show(e){document.getElementsByTagName("body")[0].style.overflow=e?"hidden":"auto"}},methods:{escapeClose(e){"Escape"===e.key&&this.handleClose()},handleClose(){this.closeable&&(this.$emit("close"),this.$emit("update:show",!1))}},mounted(){this.closeable&&document.addEventListener("keyup",this.escapeClose)},beforeDestroy(){this.closeable&&document.removeEventListener("keyup",this.escapeClose)}});
Vue.component("aui-notice",{template:'<div class="aui notice"><i :class="icon_classes"></i><h4><slot>{{text}}</slot></h4><span v-if="subtext" v-html="subtext"></span></div>',props:{type:{type:String,default:"secondary",validator:t=>-1!==["primary","secondary","success","warning","failure"].indexOf(t)},icon:{type:String,default:"fas fa-cog"},text:{type:String|Number|null,default:null},subtext:{type:String|Number|null,default:null}},computed:{icon_classes(){return{[this.icon]:!0,[this.type]:!0}}}});
Vue.component("aui-number",{template:'<span class="aui number" :class="negative_class">{{pretty_value}}</span>',props:{is_currency:{type:Boolean,default:!1},currency_symbol:{type:String,default:"$"},padding:{type:null|Number,default:null,validator:e=>0<=e&&parseInt(e)===e},number:{type:Number|String|null,required:!0}},computed:{negative_class(){return{negative:parseFloat(this.number.toString().replace(/[^0-9.-]/g,""))<0}},pretty_value(){const e=this.number.toString().replace(/[^0-9.-]/g,"");var t=this.is_currency?this.currency_symbol:"",r=parseFloat(e)<0,n=Math.abs(parseInt(e.split(".")[0])).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");const a=e.split(".")[1];var s=null!==this.padding?this.padding:this.is_currency?2:0;let l=".";return a?l+=a.toString().length<s?a.padEnd(s,"0"):a:l=0<s?l.padEnd(s+1,"0"):"",(r?"-":"")+(t||"")+`${n}${l}`}}});
Vue.component("aui-old-crud",{template:`<div class="aui crud"><aui-notice v-if="show_error" type="failure" icon="fas fa-exclamation-triangle" text="A server error has occurred" subtext="Please reload the page"/><aui-notice v-if="show_created_confirmation" type="success" icon="fas fa-check-circle" :text="form_created_confirmation_text"/><div v-if="show_form" class="form"><aui-tabs v-if="view_show_tabs" :tabs="view_tabs" :tab.sync="tab" @change="handleTabChange"/><div class="body" v-for="(form, key) in form_views" :key="'view-' + key"><slot v-if="isActiveTab(key)" :form="form" :name="key" :overlay="state.overlay" :showform="showForm" :runcreate="runCreate" :runupdate="runUpdate" :rundelete="runDelete" :closemodals="closeModals"/></div><div v-if="view_show_action_bar" class="action"><aui-button type="secondary" :disabled="state.overlay" text="Back" @click="showForm(false)"/><div class="primary"><i v-if="state.show_failure_tick" class="tic fas fa-times"/><i v-if="state.show_success_tick" class="tic fas fa-check"/><aui-button v-if="!is_valid" :loading="state.overlay" loading_text="Creating..." text="Create" @click="runCreate"/><aui-button v-else-if="!list_show_delete_button" :loading="form_update_is_running" loading_text="Updating..." text="Update" @click="runUpdate"/><div v-else class="btn-group"><aui-button :loading="form_update_is_running" loading_text="Updating..." text="Update" @click="runUpdate"/><aui-button-drop :dropdown="form_delete_dropdown" :disabled="state.overlay" @delete="runDelete"/></div></div></div><aui-modal type="failure" title="Confirm Delete" :show.sync="state.show_delete_modal"><template #content><p>{{form_delete_text}}</p><aui-input label="Type DELETE to confirm" v-model="delete_confirm"/><aui-alert v-if="error.delete_protect" type="failure" :text="error.delete_protect"/></template><template #left><aui-button type="secondary" :disabled="state.overlay" text="Cancel" @click="closeModals"/></template><template #right><aui-button type="failure" :disabled="form_delete_disabled" :loading="state.overlay" loading_text="Deleting..." text="Delete" @click="runDelete(true)"/></template></aui-modal></div></div>`,props:{list_type:{type:String,default:"group",validator:t=>-1!==["group","table"].indexOf(t)},list_can_go_to_form:{type:Boolean,default:!0},list_interactive:{type:Boolean,default:!0},list_table_columns:{type:Object,default:()=>({}),validator:t=>{for(const e in t)if("object"==typeof t[e]){if("string"!=typeof t[e].label)return!1;if(void 0!==t[e].format&&"function"!=typeof t[e].format)return!1}return!0}},list_empty_icon:{type:String,default:"fas fa-ban"},list_empty_text:{type:null|String,default:"No data found"},list_empty_subtext:{type:null|String,default:null},list_overlay_icon:{type:String,default:"fas fa-circle-notch fa-spin"},list_overlay_text:{type:null|String,default:null},list_overlay_subtext:{type:null|String,default:null},list_show_create_button:{type:Boolean,default:!0},list_show_delete_button:{type:Boolean,default:!0},list_show_search:{type:Boolean,default:!0},list_range_limit:{type:Array,default:()=>[15,25,50,100]},list_api_read:{type:String,required:!0},list_api_read_optional_data:{type:Object,default:()=>({})},form:{type:Object,default:()=>({})},feedback:{type:Object,default:()=>({})},calling:{type:Boolean,required:!0},form_api_read:{type:String},form_api_read_optional_data:{type:Object,default:()=>({})},form_api_create_setup:{type:String},form_api_create_setup_optional_data:{type:Object,default:()=>({})},form_api_create:{type:String},form_api_create_optional_data:{type:Object,default:()=>({})},form_api_update:{type:String},form_api_update_optional_data:{type:Object,default:()=>({})},form_api_delete:{type:String},form_api_delete_optional_data:{type:Object,default:()=>({})},form_created_confirmation_text:{type:String,default:"Created"},form_storable_key:{type:String,default:"id"},form_delete_text:{type:String,default:"Are you sure you want to delete?"},secure_fields:{type:Array,default:()=>[],validator:t=>{for(const e of t)if("string"!=typeof e)return!1;return!0}},views:{type:Object,default:()=>({}),validator:t=>{for(const e in t){if("object"!=typeof t[e]&&"string"!=typeof t[e])return!1;if("object"==typeof t[e]){if("string"!=typeof t[e].name)return!1;if(void 0!==t[e].show_action_bar&&"boolean"!=typeof t[e].show_action_bar)return!1}}return!0}}},data(){return{list:{data:[],limit:0,total:0,page:1,search_timer:null,search:null,sort:{},sort_order:[]},tab:null,form_delete_dropdown:{delete:"Delete"},delete_confirm:null,state:{overlay:!1,show_form:!1,show_delete_modal:!1,show_failure_tick:!1,show_success_tick:!1,show_created_confirmation:!1},error:{server:!1,delete_protect:null},page_state:{show_create:0,show_storable:0,tab_index:0}}},computed:{show_error(){return this.error.server},show_list(){return!this.error.server&&!this.state.show_form&&!this.state.show_created_confirmation},show_form(){return!this.error.server&&this.state.show_form&&!this.state.show_created_confirmation},show_created_confirmation(){return!this.error.server&&this.state.show_created_confirmation},has_list_data(){return 0<this.list.data.length},list_is_group(){return this.has_list_data&&"group"===this.list_type},list_is_table(){return this.has_list_data&&"table"===this.list_type},list_group_data(){const t=[];if("group"!==this.list_type)return t;for(const e of this.list.data)t.push({icon:e.icon||"",title:e.title,subtext:e.subtext,value:e[this.form_storable_key]});return t},list_table_data(){const t=[];if("table"!==this.list_type)return t;for(const e of this.list.data){const s={id:e[this.form_storable_key],data:{}};for(const i in this.list_table_columns)void 0!==e[i]&&(s.data[i]=e[i]);t.push(s)}return t},list_overlay_classes(){return{overlay:!0,empty:this.list.data.length<=0}},list_table_classes(){return{interactive:this.list_interactive||this.list_can_go_to_form}},form_update_is_running(){return this.state.overlay&&!this.state.show_delete_modal},form_views(){const t={};for(const e in this.views)t[e]={name:"string"==typeof this.views[e]?this.views[e]:this.views[e].name,show_action_bar:"boolean"!=typeof this.views[e].show_action_bar||this.views[e].show_action_bar};return t},form_delete_disabled(){return"DELETE"!==this.delete_confirm},view_show_tabs(){return 1<Object.keys(this.views).length&&this.is_valid},view_tabs(){const t={};for(const e in this.form_views)t[e]=this.form_views[e].name;return t},view_show_action_bar(){return this.form_views[this.tab].show_action_bar},is_valid(){return!!this.form[this.form_storable_key]}},watch:{calling:function(t){t?setTimeout(()=>{this.calling&&(this.state.overlay=!0)},100):this.state.overlay=!1}},methods:{dragToResize(t,s){let i=!0,a=t.pageX,r=this.$refs.table_headers[s].offsetWidth,o=this.$refs.table_headers[0].closest("table").offsetWidth;document.addEventListener("mousemove",t=>{var e=this.$refs.table_headers[0].closest("thead").offsetWidth;i&&o>=e&&(t=r+(t.pageX-a),this.$refs.table_headers[s].style.minWidth=`${t}px`)}),document.addEventListener("mouseup",()=>{i=!1})},doubleResetHeader(t){this.$refs.table_headers[t].style.minWidth=""},displayDraggable(t){return t<Object.keys(this.list_table_columns).length-1},readList(){var t;this.calling||(t=Object.assign({type:this.list_type,page:this.list.page,limit:this.list.limit,search:this.list.search,sort:this.list.sort,sort_order:this.list.sort_order},this.list_api_read_optional_data),this.$emit("update:calling",!0),DynamicSuite.call(this.list_api_read,t,t=>{"OK"===t.status?(this.list.data=t.data.list,this.list.total=t.data.total,this.$emit("update:calling",!1)):this.error.server=!0}))},runSearch(){clearTimeout(this.list.search_timer),this.list.search_timer=setTimeout(()=>{this.list.page=1,this.readList()},300)},listTableColumnName(t){return"object"==typeof t?t.label:t},listTableColumnFormat(t,e){return"string"==typeof this.list_table_columns[t]?e:this.list_table_columns[t].format(e)},listTableColumnClasses(t){return{hide_on_ipad:"object"==typeof this.list_table_columns[t]&&!0===this.list_table_columns[t].hide_on_ipad,hide_on_mobile:"object"==typeof this.list_table_columns[t]&&!0===this.list_table_columns[t].hide_on_mobile}},sortList(t){void 0===this.list.sort[t]?(this.list.sort_order.push(t),this.$set(this.list.sort,t,"ASC")):"ASC"===this.list.sort[t]?this.$set(this.list.sort,t,"DESC"):(this.list.sort_order.splice(this.list.sort_order.indexOf(t),1),this.$delete(this.list.sort,t)),this.list.page=1,this.readList()},isSortedAsc(t){return void 0!==this.list.sort[t]&&"ASC"===this.list.sort[t]},isSortedDesc(t){return void 0!==this.list.sort[t]&&"DESC"===this.list.sort[t]},emitListClick(t){this.$emit("list-click",t)},secureFields(){const t=this.form;for(const e of this.secure_fields)t[e]=null;this.$emit("update:form",t)},showForm(t,e=0){this.tab=Object.keys(this.views)[e],t?(this.page_state.show_create=this.is_valid?0:1,this.page_state.show_storable=this.is_valid?this.form[this.form_storable_key]:0,this.page_state.tab_index=Object.keys(this.views).indexOf(this.tab)):(this.page_state.show_create=0,this.page_state.show_storable=0,this.page_state.tab_index=0,this.readList()),this.$emit("page-state-change"),this.state.show_form=t},resetForm(){const t=this.form;for(const e in t)t[e]=null;this.$emit("update:form",t)},setForm(t){this.resetFormFeedback(),this.$emit("update:form",Object.assign(this.form,t))},setupCreate(){var t;this.resetForm(),this.resetFormFeedback(),this.form_api_create_setup?(t=Object.assign({},this.form_api_create_setup_optional_data),this.$emit("update:calling",!0),DynamicSuite.call(this.form_api_create_setup,t,t=>{"OK"===t.status?(this.setForm(t.data),this.$emit("update:calling",!1),this.showForm(!0)):this.error.server=!0})):this.showForm(!0)},isActiveTab(t){return t===this.tab},readStorable(t,e=0){var s;this.calling||(s=Object.assign({[this.form_storable_key]:t},this.form_api_read_optional_data),this.$emit("update:calling",!0),this.form_api_read?DynamicSuite.call(this.form_api_read,s,t=>{switch(t.status){case"OK":this.setForm(t.data),this.showForm(!0,e),this.$emit("update:calling",!1);break;case"NOT_FOUND":this.showForm(!1),this.$emit("update:calling",!1);break;default:this.error.server=!0}}):(this.setForm({[this.form_storable_key]:t}),this.showForm(!0,e),this.$emit("update:calling",!1)))},setFeedback(t){const e=Object.assign({},this.feedback);for(const s in t)e[s]=t[s];this.$emit("update:feedback",e)},resetFormFeedback(){this.state.show_failure_tick=!1,this.state.show_success_tick=!1,this.error.delete_protect=null;const t=Object.assign({},this.feedback);for(const e in this.feedback)t[e]=null;this.$emit("update:feedback",t)},runCreate(){var t;this.calling||(this.resetFormFeedback(),t=Object.assign({},this.form,this.form_api_create_optional_data),this.$emit("update:calling",!0),DynamicSuite.call(this.form_api_create,t,t=>{switch(t.status){case"OK":this.state.show_created_confirmation=!0,this.setForm({[this.form_storable_key]:parseInt(t.data)}),this.$emit("update:calling",!1),this.secureFields(),this.readList(),this.showForm(!0),setTimeout(()=>{this.state.show_created_confirmation=!1},1e3);break;case"INPUT_ERROR":this.state.show_failure_tick=!0,this.setFeedback(t.data),this.$emit("update:calling",!1);break;default:this.error.server=!0}}))},runUpdate(){var t;this.calling||(this.resetFormFeedback(),t=Object.assign({},this.form,this.form_api_update_optional_data),this.$emit("update:calling",!0),DynamicSuite.call(this.form_api_update,t,t=>{switch(t.status){case"OK":this.state.show_success_tick=!0,this.$emit("update:calling",!1),this.secureFields();break;case"INPUT_ERROR":this.state.show_failure_tick=!0,this.setFeedback(t.data),this.$emit("update:calling",!1);break;default:this.error.server=!0}}))},runDelete(t=!1){this.resetFormFeedback(),t?(t=Object.assign({},this.form,this.form_api_delete_optional_data),this.$emit("update:calling",!0),DynamicSuite.call(this.form_api_delete,t,t=>{switch(t.status){case"OK":this.$emit("update:calling",!1),this.$nextTick(()=>{this.closeModals(),this.showForm(!1),this.secureFields()});break;case"DELETE_PROTECT":this.error.delete_protect=t.message,this.$emit("update:calling",!1);break;default:this.error.server=!0}})):(this.delete_confirm=null,this.state.show_delete_modal=!0)},closeModals(){this.calling||(this.state.show_delete_modal=!1)},handleTabChange(t){this.page_state.tab_index=Object.keys(this.views).indexOf(t),this.$emit("page-state-change")}},mounted(){this.tab=Object.keys(this.views)[0],this.list.limit=this.list_range_limit[0],this.$on("list-click",t=>{this.list_can_go_to_form&&this.readStorable(t)});const s=()=>{this.page_state.show_create?this.setupCreate():this.page_state.show_storable?this.readStorable(this.page_state.show_storable,this.page_state.tab_index):this.showForm(!1)},t=new URLSearchParams(window.location.search),e=`_${this._uid}`;if(t.get(e)){const a=new Hashids.default;var i=a.decode(t.get(e));this.page_state.show_create=i[0],this.page_state.show_storable=i[1],this.page_state.tab_index=i[2],s()}else this.readList();this.$on("page-state-change",()=>{const t=new Hashids.default,e=new URLSearchParams(window.location.search);var s=`_${this._uid}`;const i=Object.values(this.page_state);var a=t.encode(i),r=(t,e)=>{t=t.toString().length?`?${t.toString()}`:window.location.href.split("?")[0];history.pushState(e,"",t)};i.reduce((t,e)=>t+e)&&e.get(s)!==a?(e.set(s,a),r(e,a)):!i.reduce((t,e)=>t+e)&&e.has(s)&&(e.delete(s),r(e,null))}),window.onpopstate=t=>{if(t.state){const e=new Hashids.default;t=e.decode(t.state);this.page_state.show_create=t[0],this.page_state.show_storable=t[1],this.page_state.tab_index=t[2],s()}else this.showForm(!1)}}});
Vue.component("aui-pagination",{template:`<div class="aui pagination"><div class="range"><label>Showing</label> <select :disabled="disabled" @change="updateLimit" :value="limit"><option v-for="range_limit in list_range_limit" :key="'page-limit-' + range_limit" :value="range_limit" v-html="range_limit"/></select> <span>from {{from.toLocaleString()}} to {{to.toLocaleString()}} of {{total.toLocaleString()}}</span></div><div v-if="pages > 1" class="aui btn-group"><aui-button type="secondary" class="chevron" text="«" :disabled="disabled" @click="paginate(1)"/><aui-button type="secondary" class="chevron" text="‹" :disabled="disabled" @click="paginate(page - 1)"/><aui-button v-for="(page, key) in button_range" :key="'pagination-' + key" :type="paginateButtonType(page)" :text="page" :disabled="disabled" class="page-button" @click="paginate(page)"/><aui-button type="secondary" class="chevron" text="›" :disabled="disabled" @click="paginate(page + 1)"/><aui-button type="secondary" class="chevron" text="»" :disabled="disabled" @click="paginate(pages)"/></div><div v-else class="single-page"><strong>1</strong> / <strong>1</strong></div></div>`,props:{disabled:{type:Boolean,default:!1},page:{type:Number,required:!0},total:{type:Number,required:!0},limit:{type:Number,required:!0},list_range_limit:{type:Array,required:!0}},computed:{pages(){return Math.ceil(this.total/this.limit)},offset(){let t=(this.page-1)*this.limit;return t>this.total&&(t=this.total-this.limit,this.$emit("update:page",this.pages)),t},from(){return this.offset+1},to(){let t=this.from+this.limit-1;return t>this.total&&(t=this.total),t},button_range(){const e=[];if(this.pages<5)for(let t=1;t<=this.pages;t++)e.push(t);else if(this.page<3)for(let t=1;t<=5;t++)e.push(t);else{var i=this.page+2>this.pages,a=i?this.pages:this.page+2;for(let t=i?this.pages-4:this.page-2;t<=a;t++)e.push(t)}return e}},methods:{updateLimit(t){this.$emit("update:limit",parseInt(t.target.value)),this.$emit("update:page",1),this.$emit("paginate")},paginate(t){this.disabled||t!==this.page&&(t<1||t>this.pages||(this.$emit("update:page",t),this.$emit("paginate")))},paginateButtonType(t){return this.page===parseInt(t)?"primary":"secondary"}}});
Vue.component("aui-radio",{template:`<aui-form-control v-bind="properties"><input type="radio" :name="name" :value="data" :disabled="disabled" @input="$emit('input', $event.target.value)"/></aui-form-control>`,props:{label:{type:null|String,default:null},data:{type:String|Number|Boolean|null,default:null},value:{type:String|Number|Boolean|null,default:null},name:{type:String,required:!0},disabled:{type:Boolean,default:!1},success:{type:null|String,default:null},failure:{type:null|String,default:null},subtext:{type:null|String,default:null}},computed:{properties(){return{parent:"radio",label:this.$slots.default||this.label,success:this.success,failure:this.failure,subtext:this.subtext}}}});
Vue.component("aui-select",{template:`<aui-form-control v-bind="properties"><select :value="value" :autocomplete="autocomplete" :disabled="disabled" :multiple="multiple" :size="size" v-model="selected" @focus="$emit('focus', $event.target)" @blur="$emit('blur', $event.target)" @change="$emit('input', selected)"><option v-for="(option, key) in render_options" :key="'option-' + key" :value="key">{{option}}</option></select></aui-form-control>`,props:{label:{type:null|String,default:null},leading_cap:{type:null|String,default:null},trailing_cap:{type:null|String,default:null},value:{type:String|Number|Boolean|null,default:null},autocomplete:{type:null|String,default:null},disabled:{type:Boolean,default:!1},options:{type:Object|Array,default:()=>({})},multiple:{type:Boolean,default:!1},size:{type:String|Number|null,default:null},success:{type:null|String,default:null},failure:{type:null|String,default:null},subtext:{type:null|String,default:null},no_feedback_icon:{type:Boolean,default:!1},us_states:{type:Boolean,default:!1}},data(){return{selected:this.value,states:{0:"",AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"}}},computed:{properties(){return{parent:"select",label:this.$slots.default||this.label,leading_cap:this.leading_cap,trailing_cap:this.trailing_cap,success:this.success,failure:this.failure,subtext:this.subtext,no_feedback_icon:!!this.no_feedback_icon}},render_options(){return this.us_states?this.states:this.options}},watch:{value(){this.selected=this.value}}});
Vue.component("aui-select-assignment",{template:`<div class="aui select-assignment"><div class="select-assigned"><aui-select :label="assigned_label" :options="assigned" multiple="multiple" :size="size" :disabled="disabled" v-model="assigned_selected"/><aui-button :text="'Move to &quot;' + unassigned_label + '&quot; list'" type="secondary" :disabled="disabled" @click="move('assigned')"/></div><div class="select-unassigned"><aui-select :label="unassigned_label" :options="unassigned" multiple="multiple" :size="size" :disabled="disabled" v-model="unassigned_selected"/><aui-button :text="'Move to &quot;' + assigned_label + '&quot; list'" type="secondary" :disabled="disabled" @click="move('unassigned')"/></div></div>`,props:{assigned:{type:Object|Array|null,required:!0},assigned_label:{type:String,default:"Assigned"},unassigned:{type:null|Object,required:!0},unassigned_label:{type:String,default:"Unassigned"},disabled:{type:Boolean,default:!1},size:{type:String|Number|null,default:5}},data(){return{assigned_selected:[],unassigned_selected:[]}},methods:{move(e){const s=Object.assign({},this.assigned),i=Object.assign({},this.unassigned);for(const t of this[`${e}_selected`])"assigned"===e?(i[t]=s[t],delete s[t]):(s[t]=i[t],delete i[t]);this.$emit("update:assigned",s),this.$emit("update:unassigned",i),this.$emit("update",{assigned:s,unassigned:i}),this[`${e}_selected`]=[]}}});
Vue.component("aui-table",{template:`<div class="aui table"><div v-if="interactive" class="options"><i class="fas fa-columns" title="Select Columns To View" @click="showColumnsModal"/></div><aui-modal :show.sync="show_columns_modal" title="Select Columns To View"><template #content><aui-checkbox v-for="(selected, column) in columns_modal_model" :key="'column' + column" :label="columnName(column)" :checked="selected" v-model="columns_modal_model[column]"/><aui-alert v-if="columns_modal_feedback" type="failure" :text="columns_modal_feedback"/></template><template #left><aui-button type="secondary" text="Cancel" @click="hideColumnsModal"/></template><template #right><div class="btn-group"><aui-button text="Apply" @click="applyColumns"/><aui-button-drop :dropdown="{reset: 'Reset to Default'}" relative_to=".modal" @reset="resetColumns"/></div></template></aui-modal><table :class="table_classes"><thead><tr><th v-for="(column, id) in columns" :key="'header' + id" ref="header" @mousedown.self="runSort(column)">{{columnName(column)}} <i v-if="sortable" :class="sortIcon(column)"/><div v-if="interactive" @mousedown="handleResizeColumn($event, id)"/></th></tr></thead><tbody><tr v-for="(row, id) in filtered_table" :key="'row' + id" @click="rowInteraction(id)"><td v-for="(column_value, column) in row" :key="'column' + column + id">{{columnValue(column, column_value)}}</td></tr></tbody></table></div>`,props:{table:{type:Array,default:()=>[]},interactive:{type:Boolean,default:!1},interactive_column:{type:null|String,default:null},default_columns:{type:Array,default:()=>[]},column_names:{type:Object,default:()=>({})},column_format:{type:Object,default:()=>({})},sortable:{type:Boolean,default:!1},sort:{type:Object,default:()=>({})},sort_icon_none:{type:String,default:"fas fa-sort"},sort_icon_asc:{type:String,default:"fas fa-sort-amount-down-alt"},sort_icon_desc:{type:String,default:"fas fa-sort-amount-down"},storage_key:{type:null|String,default:null},calling:{type:Boolean,default:!1}},data(){return{columns:[],show_columns_modal:!1,columns_modal_model:{},columns_modal_feedback:null}},computed:{table_classes(){return{interactive:this.interactive,sortable:this.sortable}},available_columns(){return"object"!=typeof this.table[0]?[]:Object.keys(this.table[0])},filtered_table(){const t=[];for(const o of this.table)t.push(Object.keys(o).filter(t=>this.columns.includes(t)).reduce((t,e)=>(t[e]=o[e],t),{}));return t}},methods:{columnName(t){return this.column_names.hasOwnProperty(t)?this.column_names[t]:t},columnValue(t,e){return this.column_format.hasOwnProperty(t)?this.column_format[t](e):e},sortIcon(t){return{[this.sort_icon_none]:!this.sort.hasOwnProperty(t),[this.sort_icon_asc]:this.sort.hasOwnProperty(t)&&"ASC"===this.sort[t],[this.sort_icon_desc]:this.sort.hasOwnProperty(t)&&"DESC"===this.sort[t]}},runSort(e){if(this.sortable&&!this.calling){let t=JSON.parse(JSON.stringify(this.sort));"object"!=typeof t&&(t={}),t.hasOwnProperty(e)?"ASC"===t[e]?t[e]="DESC":delete t[e]:t[e]="ASC",this.$emit("update:sort",t)}},rowInteraction(t){this.interactive&&!this.calling&&this.interactive_column&&this.filtered_table[t].hasOwnProperty(this.interactive_column)&&this.$emit("row-interaction",this.filtered_table[t][this.interactive_column])},handleResizeColumn(t,e){let o=!0;const s=t.pageX,l=parseInt(window.getComputedStyle(this.$refs.header[e]).width);document.addEventListener("mousemove",t=>{o&&(t=l+(t.pageX-s),this.$refs.header[e].style.width=`${t}px`)}),document.addEventListener("mouseup",()=>{o=!1})},resetColumns(){this.default_columns.length?this.columns=this.default_columns:this.columns=JSON.parse(JSON.stringify(this.available_columns)),this.show_columns_modal=!1,this.storage_key&&(localStorage.removeItem(this.storage_key),this.$root.$emit("aui-table-reset"))},showColumnsModal(){if(!this.calling){const t={};for(const e of this.available_columns)t[e]=-1!==this.columns.indexOf(e);this.$set(this,"columns_modal_model",t),this.columns_modal_feedback=!1,this.show_columns_modal=!0}},hideColumnsModal(){this.show_columns_modal=!1},applyColumns(){const t=[];for(const e in this.columns_modal_model)this.columns_modal_model[e]&&t.push(e);t.length?(this.$set(this,"columns",t),this.saveLayout(),this.hideColumnsModal()):this.columns_modal_feedback="Must select at least 1 column"},saveLayout(){this.storage_key&&(localStorage.setItem(this.storage_key,JSON.stringify(this.columns)),this.$root.$emit("aui-table-save",this.columns))},getSavedLayout(){if(!this.storage_key)return!1;let t=null,e=DynamicSuite.readCustomData("aui_table");return t=e&&e.hasOwnProperty(this.storage_key)?e[this.storage_key]:localStorage.getItem(this.storage_key),!!t&&JSON.parse(t)}},mounted(){var e=this.getSavedLayout();if(e){let t=!0;for(const o of e)-1===this.available_columns.indexOf(o)&&(t=!1);t?this.$set(this,"columns",e):this.resetColumns()}else this.resetColumns()}});
Vue.component("aui-tabs",{template:'<div class="aui tabs"><span v-if="!collapsed" v-for="(name, tab) in tabs" v-html="name" class="tab" :class="tabClass(tab)" @click="handleClick(tab)"/><aui-button-drop v-if="collapsed" :dropdown="tabs" :text="tabs[tab]" @menu-click="handleClick" menu_align="left"/></div>',props:{tabs:{type:Object,required:!0},tab:{type:String|Number,required:!0},disabled:{type:Boolean,default:!1}},data(){return{width:0,collapsed:!1}},methods:{handleClick(e){this.disabled||(this.$emit("update:tab",e),this.$emit("change",e))},tabClass(e){return{disabled:this.disabled,active:e===this.tab}},checkIfCollapsed(){window.requestAnimationFrame(()=>{this.collapsed=this.$el.clientWidth<=this.width||this.width+40>=this.$el.parentElement.clientWidth})}},mounted(){window.addEventListener("resize",this.checkIfCollapsed),this.$nextTick(()=>{for(let e=0;e<this.$el.childNodes.length;e++)"number"==typeof this.$el.childNodes[e].offsetWidth&&(this.width+=this.$el.childNodes[e].offsetWidth+1);this.width+=32,this.checkIfCollapsed()})},beforeDestroy(){window.removeEventListener("resize",this.checkIfCollapsed)}});
Vue.component("aui-textarea",{template:`<aui-form-control v-bind="properties"><textarea :value="value" :placeholder="placeholder" :autocomplete="autocomplete" :disabled="disabled" :rows="rows" @focus="$emit('focus', $event.target)" @blur="$emit('blur', $event.target)" @input="$emit('input', $event.target.value)" @keydown="$emit('keydown', $event)"/></aui-form-control>`,props:{label:{type:null|String,default:null},leading_cap:{type:null|String,default:null},trailing_cap:{type:null|String,default:null},value:{type:String|Number|Boolean|null,default:null},autocomplete:{type:null|String,default:null},placeholder:{type:null|String,default:null},disabled:{type:Boolean,default:!1},rows:{type:String|Number|null,default:null},success:{type:null|String,default:null},failure:{type:null|String,default:null},subtext:{type:null|String,default:null}},computed:{properties(){return{parent:"textarea",label:this.$slots.default||this.label,leading_cap:this.leading_cap,trailing_cap:this.trailing_cap,success:this.success,failure:this.failure,subtext:this.subtext}}}});
Vue.component("aui-toggle",{template:`<aui-form-control v-bind="properties"><input type="checkbox" :value="value" :checked="toggled" :disabled="disabled" @input="$emit('input', $event.target.checked)"/></aui-form-control>`,props:{label:{type:null|String,default:null},value:{type:String|Number|Boolean|null,default:null},toggled:{type:Boolean|Number,default:!1},disabled:{type:Boolean,default:!1},success:{type:null|String,default:null},failure:{type:null|String,default:null},subtext:{type:null|String,default:null}},computed:{properties(){return{parent:"toggle",label:this.$slots.default||this.label,success:this.success,failure:this.failure,subtext:this.subtext}}}});
Vue.component("aui-wysiwyg",{template:'<aui-form-control v-bind="properties"><div ref="editor"/></aui-form-control>',props:{label:{type:null|String,default:null},actions:{type:Array,default:()=>["bold","italic","underline","heading1","ulist","olist"]},default_paragraph_separator:{type:String,default:"p"},style_with_css:{type:Boolean,default:!0},classes:{type:Object,default:()=>({actionbar:"pell-actionbar",button:"pell-btn",content:"pell-content",selected:"pell-button-selected"})},value:{type:String|Number|Boolean|null,default:null},placeholder:{type:null|String,default:null},disabled:{type:Boolean,default:!1},success:{type:null|String,default:null},failure:{type:null|String,default:null},subtext:{type:null|String,default:null}},data(){return{editor:null}},computed:{properties(){return{parent:"wysiwyg",label:this.$slots.default||this.label,success:this.success,failure:this.failure,subtext:this.subtext}}},watch:{value:function(t){this.editor.content.innerHTML!==t&&(this.editor.content.innerHTML=t)},disabled:function(t){this.$refs.editor.querySelector(".pell-content").setAttribute("contenteditable",t?"false":"true")}},mounted(){this.editor=pell.init({element:this.$refs.editor,actions:this.actions,defaultParagraphSeparator:this.default_paragraph_separator,styleWithCSS:this.style_with_css,classes:this.classes,onChange:t=>{this.$emit("input",t)}}),this.$refs.editor.querySelector(".pell-content").setAttribute("contenteditable",this.disabled?"false":"true"),this.value&&(this.editor.content.innerHTML=this.value)}});
